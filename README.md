# ADO ChatGPT

A ChatGPT-like experience to query over work item data within an Azure DevOps
organization.

## Pre-requisites

To run this sample in its entirety, you need the following:

- a bash-like shell (e.g. Git Bash, WSL, etc.)
- an Azure DevOps organization and team project from which data will be exported
- an Azure DevOps
  [work item query](https://learn.microsoft.com/en-us/azure/devops/boards/queries/using-queries?view=azure-devops&tabs=browser)
  to pull work items from (should return 1000 items or less)
- an Azure subscription, with access to [Open AI](https://aka.ms/oai/access)
- az cli installed and logged in to your Azure subscription

## Configuration

Duplicate the `.envsample` file and rename it to `.env`. Fill in the values for
all of the required environment variables.

The following parameters can be configured:

| Name                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Required? |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| AZURE_LOCATION                     | The name of the Azure region to deploy to; a list can be found by running `az account list-locations -o table --query "[].displayName"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Yes       |
| AZURE_WORKLOAD                     | The workload name to be used when creating Azure resources; keep short and limited to A-z, 0-9, and hyphens                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Yes       |
| AZURE_SUBSCRIPTIONID               | The Subscription ID (GUID) that this sample will be deployed to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Yes       |
| ADO_ORG                            | The Azure DevOps organization name work items will be exported from                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Yes       |
| ADO_PROJECT                        | The Azure DevOps project name work items will be exported from                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Yes       |
| ADO_QUERIES                        | A comma-separated list of query IDs that work items will be pulled from                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Yes       |
| ADO_RECORDFORMAT                   | A [JMESPath query](https://jmespath.org) to flatten the ADO [work item JSON](https://learn.microsoft.com/en-us/rest/api/azure/devops/wit/work-items/get-work-item?view=azure-devops-rest-7.1&tabs=HTTP); defaults to: `{Id:id,AreaPath:fields."System.AreaPath",AssignedTo:fields."System.AssignedTo".displayName,State:fields."System.State",CreatedDate:fields."System.CreatedDate",ChangedDate:fields."System.ChangedDate",Title:fields."System.Title",StateChangeDate:fields."Microsoft.VSTS.Common.StateChangeDate",ClosedDate:fields."Microsoft.VSTS.Common.ClosedDate",Description:fields."System.Description",Tags:fields."System.Tags"}` | Yes       |
| AZURE_OPENAI_EMBEDDINGMODELNAME    | The name of the [Azure OpenAI Model](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#model-summary-table-and-region-availability) to use for embedding vectors into the Azure AI Search index (recommended to use `text-embedding-ada-002` or equivalent)                                                                                                                                                                                                                                                                                                                                                              | Yes       |
| AZURE_OPENAI_EMBEDDINGMODELVERSION | The version of the [Azure OpenAI Model](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#model-summary-table-and-region-availability) to use for embedding vectors into the Azure AI Search index (recommended to use `2` or equivalent)                                                                                                                                                                                                                                                                                                                                                                                | Yes       |
| AZURE_OPENAI_MODELNAME             | The name of the [Azure OpenAI Model](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#model-summary-table-and-region-availability) to use for querying the Azure AI Search index (recommended to use `gpt-35-turbo-16k` or equivalent)                                                                                                                                                                                                                                                                                                                                                                                  | Yes       |
| AZURE_OPENAI_MODELVERSION          | The version of the [Azure OpenAI Model](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#model-summary-table-and-region-availability) to use for querying the Azure AI Search index (recommended to use `0613` or equivalent)                                                                                                                                                                                                                                                                                                                                                                                           | No        |
| SKIP_ADO_DOWNLOAD                  | Set to `1` to skip the ADO Work Item download process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No        |
| SKIP_ADO_UPLOAD                    | Set to `1` to skip the ADO Work Item upload to Azure Storage process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | No        |
| SKIP_INFRASTRUCTURE                | Set to `1` to skip the Azure infrastructure deployment process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | No        |
| SKIP_OPENAI_MODELSETUP             | Set to `1` to skip the Azure Open AI model setup process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        |
| SKIP_SEARCH_DATASOURCESETUP        | Set to `1` to skip the Azure AI Search data source setup process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | No        |
| SKIP_SEARCH_INDEXERSETUP           | Set to `1` to skip the Azure AI Search indexer setup process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | No        |
| SKIP_SEARCH_INDEXSETUP             | Set to `1` to skip the Azure AI Search index setup process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        |
| SKIP_SEARCH_SKILLSETSETUP          | Set to `1` to skip the Azure AI Search skill set setup process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | No        |

## Deploy the Resources

Execute the following commands to deploy the sample:

```bash

deploy.sh

```

## Use Azure OpenAI Studio to Chat with Your Data

Once the resources are deployed, you can use the
[Azure OpenAI Studio](https://oai.azure.com/portal/) to chat with your newly
deployed model.

## References and Additional Resources

- This sample is heavily based off this article:
  [Chat with your Azure DevOps data | Microsoft Tech Communities](https://techcommunity.microsoft.com/t5/fasttrack-for-azure/chat-with-your-azure-devops-data/ba-p/4017784)
- Which itself is based off this sample:
  [Preview - Sample Chat App with AOAI | GitHub](https://github.com/microsoft/sample-app-aoai-chatGPT)
